import{r as i,A as h,u as g,c as f,j as e}from"./index-CHKk25vh.js";import{m as v}from"./mockProjects-CWv7H0qW.js";const N=[{id:"1",name:"Admin User",role:"admin"},{id:"2",name:"Test Lead",role:"test-lead"},{id:"3",name:"Tester One",role:"tester"},{id:"4",name:"Tester Two",role:"tester"},{id:"5",name:"Viewer",role:"read-only"}],y=l=>v.find(a=>a.id===l)||null;function w(){const{user:l}=i.useContext(h),a=g(),{id:n}=f(),[x,m]=i.useState(!1);if(l.role!=="admin"&&l.role!=="test-lead")return e.jsx("div",{className:"text-red-600",children:"You do not have permission to manage projects."});const[r,c]=i.useState({name:"",description:"",version:"",status:"Active",members:[]}),o=s=>{c(t=>({...t,[s.target.name]:s.target.value}))},u=s=>{s.preventDefault(),console.log("Project submitted:",r),a("/projects")},j=s=>{c(t=>{const b=t.members.find(d=>d.id===s.id);return{...t,members:b?t.members.filter(d=>d.id!==s.id):[...t.members,s]}})},p=s=>r.members.some(t=>t.id===s);return i.useEffect(()=>{n&&(m(!0),setTimeout(()=>{const s=y(n);if(!s){alert("Project not found"),a("/projects");return}c({name:s.name||"",description:s.description||"",version:s.version||"",status:s.status||"Active",members:s.members||[]}),m(!1)},400))},[n,a]),x?e.jsx("div",{className:"text-slate-500",children:"Loading project details..."}):e.jsxs("div",{className:"max-w-3xl space-y-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-slate-800",children:n?"Edit Project":"Create Project"}),e.jsxs("form",{onSubmit:u,className:"rounded-xl border bg-white p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Project Name"}),e.jsx("input",{name:"name",value:r.name,onChange:o,required:!0,className:"w-full rounded-lg border px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:r.description,onChange:o,rows:"3",className:"w-full rounded-lg border px-3 py-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Version"}),e.jsx("input",{name:"version",value:r.version,onChange:o,className:"w-full rounded-lg border px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:r.status,onChange:o,className:"w-full rounded-lg border px-3 py-2",children:[e.jsx("option",{children:"Active"}),e.jsx("option",{children:"In Progress"}),e.jsx("option",{children:"Archived"})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-sm font-medium text-slate-800 mb-2",children:"Assign Team Members"}),e.jsxs("div",{className:"rounded-lg border bg-slate-50 p-4 space-y-2",children:[N.map(s=>e.jsxs("label",{className:"flex items-center gap-3 text-sm",children:[e.jsx("input",{type:"checkbox",checked:p(s.id),onChange:()=>j(s)}),e.jsx("span",{className:"text-slate-700",children:s.name}),e.jsxs("span",{className:"text-xs text-slate-500",children:["(",s.role,")"]})]},s.id)),r.members.length===0&&e.jsx("p",{className:"text-xs text-slate-500",children:"No members assigned"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:()=>a("/projects"),className:"rounded-lg border px-4 py-2 text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded-lg bg-blue-600 px-4 py-2 text-sm text-white hover:bg-blue-700",children:n?"Update Project":"Create Project"})]})]})]})}export{w as default};
